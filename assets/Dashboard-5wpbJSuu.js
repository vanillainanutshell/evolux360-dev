import{a6 as M,r as i,j as e,Y as R,ai as E,B as c,x as s,M as l,W as b,X as V,P as g,O as x}from"./main-CGwiwnLm.js";import{d as j}from"./dataService-NZAvkUEf.js";import{E as A}from"./ErrorMessage-S_0HR3f_.js";import{T as $}from"./TrendingUp-DyD7xMGH.js";import{S as D}from"./ShoppingCart-BPQ1RPQH.js";import{A as L}from"./AccountBalance-WTSuBhed.js";function W(){const a=M(),[o,f]=i.useState({totalVendas:0,totalClientes:0,vendasMes:0,saldoAtual:0}),[C,u]=i.useState(!0),[m,h]=i.useState(null),p=async()=>{try{u(!0),h(null);const[t,d]=await Promise.all([j.getVendas(),j.getClientes()]),v=t.reduce((r,n)=>r+n.total,0),B=t.filter(r=>{const n=new Date(r.data),y=new Date().getMonth();return n.getMonth()===y}).reduce((r,n)=>r+n.total,0);f({totalVendas:v,totalClientes:d.length,vendasMes:B,saldoAtual:v*.8})}catch(t){console.error("Erro ao carregar estatísticas:",t),h("Erro ao carregar dados do dashboard")}finally{u(!1)}};i.useEffect(()=>{p()},[]);const S=i.useMemo(()=>[{title:"Vendas do Mês",value:`R$ ${o.vendasMes.toLocaleString("pt-BR")}`,icon:e.jsx($,{}),color:"#4caf50",action:()=>a("/vendas")},{title:"Total de Clientes",value:o.totalClientes,icon:e.jsx(R,{}),color:"#2196f3",action:()=>a("/crm")},{title:"Total de Vendas",value:`R$ ${o.totalVendas.toLocaleString("pt-BR")}`,icon:e.jsx(D,{}),color:"#ff9800",action:()=>a("/vendas")},{title:"Saldo Atual",value:`R$ ${o.saldoAtual.toLocaleString("pt-BR")}`,icon:e.jsx(L,{}),color:"#9c27b0",action:()=>a("/financeiro")}],[o,a]);return C?e.jsx(E,{message:"Carregando dashboard..."}):m?e.jsx(A,{message:m,onRetry:p}):e.jsxs(c,{sx:{p:3},children:[e.jsx(s,{variant:"h4",gutterBottom:!0,children:"Dashboard"}),e.jsx(l,{container:!0,spacing:3,sx:{mb:4},children:S.map((t,d)=>e.jsx(l,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{sx:{cursor:"pointer","&:hover":{transform:"translateY(-2px)",transition:"0.2s"}},onClick:t.action,children:e.jsxs(V,{children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(c,{sx:{color:t.color,mr:2},children:t.icon}),e.jsx(s,{variant:"h6",component:"div",children:t.title})]}),e.jsx(s,{variant:"h4",sx:{color:t.color},children:t.value})]})})},d))}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,md:8,children:e.jsxs(g,{sx:{p:3},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Acesso Rápido"}),e.jsxs(c,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(x,{variant:"contained",onClick:()=>a("/vendas/nova"),children:"Nova Venda"}),e.jsx(x,{variant:"outlined",onClick:()=>a("/crm"),children:"Ver Clientes"}),e.jsx(x,{variant:"outlined",onClick:()=>a("/financeiro"),children:"Financeiro"})]})]})}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(g,{sx:{p:3},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Resumo do Sistema"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Bem-vindo ao Evolux360! Use o menu lateral para navegar entre os módulos."})]})})]})]})}export{W as default};
